<ion-content [fullscreen]="true" class="workbook-content" [scrollY]="false">
  <div class="prompt-bar">
    <ion-menu-button color="light"></ion-menu-button>
    <span class="prompt-text" [style.color]="promptColor">{{ promptText }}</span>
  </div>

  <div class="canvas-wrapper">
    <canvas #canvas class="drawing-canvas" *ngIf="!noCardsAvailable"></canvas>
    <ion-button class="undo-btn" fill="clear" (click)="onUndo()" *ngIf="!noCardsAvailable">
      <ion-icon name="backspace"></ion-icon>
    </ion-button>

    <div class="caught-up-box" *ngIf="noCardsAvailable">
      <div class="caught-up-title">„Åä„ÇÅ„Åß„Å®„ÅÜü•≥</div>
      <div class="caught-up-message">You're all caught up. Come back again soon for more lessons!</div>
    </div>
  </div>

  <ion-button class="check-btn" color="primary" (click)="onCheck()" [disabled]="isChecking" *ngIf="!noCardsAvailable">
    <ion-spinner *ngIf="isChecking" name="crescent"></ion-spinner>
    <span *ngIf="!isChecking">{{ checkButtonText }}</span>
  </ion-button>

  <div class="results-overlay" *ngIf="showResults" (click)="dismissResults()">
    <div class="results-card" [class]="resultStatus" (click)="$event.stopPropagation()">
      <div class="status-display">
        <span *ngIf="resultStatus === 'correct'">‚óØ</span>
        <span *ngIf="resultStatus === 'befuddled'">Ôºü</span>
        <span *ngIf="resultStatus === 'wrong'">‚úï</span>
      </div>
      <div class="feedback">{{ resultFeedback }}</div>
      <div class="stroke-info">{{ strokeCountInfo }}</div>
      <div class="matches-section" *ngIf="displayMatches.length > 0">
        <div class="matches-title">Recognized:</div>
        <div class="matches-list">
          <div class="match-item" *ngFor="let m of displayMatches">
            <span class="match-char">{{ m.character }}</span>
          </div>
        </div>
      </div>
      <div class="correct-answer-section" *ngIf="resultStatus === 'wrong' && correctAnswer">
        <div class="correct-answer-title">Answer:</div>
        <div class="correct-answer">{{ correctAnswer }}</div>
      </div>
      <ion-button expand="block" (click)="dismissResults()">{{ dismissButtonText }}</ion-button>
    </div>
  </div>
</ion-content>
