<ion-content [fullscreen]="true" class="workbook-content" [scrollY]="false">
  <div class="prompt-bar">
    <ion-menu-button color="light"></ion-menu-button>
    <span class="prompt-text">{{ promptText }}</span>
  </div>

  <div class="canvas-wrapper">
    <canvas #canvas class="drawing-canvas"></canvas>
    <ion-button class="undo-btn" fill="clear" (click)="onUndo()">
      <ion-icon name="backspace"></ion-icon>
    </ion-button>
  </div>

  <ion-button class="check-btn" (click)="onCheck()" [disabled]="isChecking">
    <ion-spinner *ngIf="isChecking" name="crescent"></ion-spinner>
    <span *ngIf="!isChecking">CHECK!</span>
  </ion-button>

  <div class="results-overlay" *ngIf="showResults" (click)="dismissResults()">
    <div class="results-card" [class]="resultStatus" (click)="$event.stopPropagation()">
      <div class="status-display">
        <span *ngIf="resultStatus === 'correct'">◯</span>
        <span *ngIf="resultStatus === 'befuddled'">？</span>
        <span *ngIf="resultStatus === 'wrong'">✕</span>
      </div>
      <div class="feedback">{{ resultFeedback }}</div>
      <div class="stroke-info">{{ strokeCountInfo }}</div>
      <div class="matches-section" *ngIf="topMatches.length > 0">
        <div class="matches-title">Recognized:</div>
        <div class="matches-list">
          <div class="match-item" *ngFor="let m of topMatches">
            <span class="match-char">{{ m.character }}</span>
          </div>
        </div>
      </div>
      <ion-button expand="block" (click)="dismissResults()">OK</ion-button>
    </div>
  </div>
</ion-content>
