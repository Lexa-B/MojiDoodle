"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8435],{8435(C,v,i){i.d(v,{WorkbookPageModule:()=>x});var g=i(2200),f=i(4341),p=i(7343),d=i(8132),r=i(8690),n=i(3664),h=i(2615);const k=["canvas"];let u=(()=>{var a;class s{constructor(){this.isDrawing=!1}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>this.setupCanvas(),100)}ngOnDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()}setupCanvas(){const e=this.canvasRef.nativeElement,t=e.parentElement;t&&(this.resizeCanvas(),this.resizeObserver=new ResizeObserver(()=>this.resizeCanvas()),this.resizeObserver.observe(t),this.ctx=e.getContext("2d"),this.setCanvasStyle(),e.addEventListener("mousedown",this.handleMouseDown.bind(this)),e.addEventListener("mousemove",this.handleMouseMove.bind(this)),e.addEventListener("mouseup",this.handleMouseUp.bind(this)),e.addEventListener("mouseleave",this.handleMouseUp.bind(this)),e.addEventListener("touchstart",this.handleTouchStart.bind(this),{passive:!1}),e.addEventListener("touchmove",this.handleTouchMove.bind(this),{passive:!1}),e.addEventListener("touchend",this.handleTouchEnd.bind(this)))}resizeCanvas(){const e=this.canvasRef.nativeElement,t=e.parentElement;t&&(e.width=t.clientWidth,e.height=t.clientHeight,this.ctx&&this.setCanvasStyle())}setCanvasStyle(){this.ctx.strokeStyle="#000",this.ctx.lineWidth=4,this.ctx.lineCap="round",this.ctx.lineJoin="round"}handleMouseDown(e){this.isDrawing=!0;const t=this.getMousePos(e);this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y)}handleMouseMove(e){if(!this.isDrawing)return;const t=this.getMousePos(e);this.ctx.lineTo(t.x,t.y),this.ctx.stroke()}handleMouseUp(){this.isDrawing=!1}handleTouchStart(e){e.preventDefault(),this.isDrawing=!0;const t=this.getTouchPos(e);this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y)}handleTouchMove(e){if(!this.isDrawing)return;e.preventDefault();const t=this.getTouchPos(e);this.ctx.lineTo(t.x,t.y),this.ctx.stroke()}handleTouchEnd(){this.isDrawing=!1}getMousePos(e){const t=this.canvasRef.nativeElement,o=t.getBoundingClientRect();return{x:t.width/o.width*(e.clientX-o.left),y:t.height/o.height*(e.clientY-o.top)}}getTouchPos(e){const t=this.canvasRef.nativeElement,o=t.getBoundingClientRect();return{x:t.width/o.width*(e.touches[0].clientX-o.left),y:t.height/o.height*(e.touches[0].clientY-o.top)}}onCheck(){console.log("Check button pressed")}clearCanvas(){const e=this.canvasRef.nativeElement;this.ctx.clearRect(0,0,e.width,e.height)}static#t=a=()=>(this.\u0275fac=function(t){return new(t||s)},this.\u0275cmp=n.VBU({type:s,selectors:[["app-workbook"]],viewQuery:function(t,o){if(1&t&&n.GBs(k,5),2&t){let c;n.mGM(c=n.lsd())&&(o.canvasRef=c.first)}},decls:17,vars:2,consts:[["canvas",""],[3,"translucent"],["slot","start"],[1,"workbook-content",3,"fullscreen"],[1,"workbook-container"],[1,"prompt-section"],[1,"prompt-text"],[1,"canvas-section"],[1,"drawing-canvas"],[1,"button-section"],["expand","block","size","large",3,"click"]],template:function(t,o){if(1&t){const c=n.RV6();n.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2),n.nrm(3,"ion-menu-button"),n.k0s(),n.j41(4,"ion-title"),n.EFF(5,"Workbook"),n.k0s()()(),n.j41(6,"ion-content",3)(7,"div",4)(8,"div",5)(9,"span",6),n.EFF(10,"\u3042"),n.k0s()(),n.j41(11,"div",7),n.nrm(12,"canvas",8,0),n.k0s(),n.j41(14,"div",9)(15,"ion-button",10),n.bIt("click",function(){return h.eBV(c),h.Njj(o.onCheck())}),n.EFF(16,"Check!"),n.k0s()()()()}2&t&&(n.Y8G("translucent",!0),n.R7$(6),n.Y8G("fullscreen",!0))},dependencies:[r.eU,r.ai,r.BC,r.W9,r.QW,r.MC,r.Jm],styles:[".workbook-content[_ngcontent-%COMP%]{--background: #f5f5f5}.workbook-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;padding:16px;gap:16px}.prompt-section[_ngcontent-%COMP%]{flex:0 0 80px;display:flex;align-items:center;justify-content:center;background:var(--ion-color-light);border-radius:12px}.prompt-text[_ngcontent-%COMP%]{font-size:48px;font-weight:700}.canvas-section[_ngcontent-%COMP%]{flex:1;background:#fff;border-radius:12px;border:2px solid var(--ion-color-medium);overflow:hidden}.drawing-canvas[_ngcontent-%COMP%]{width:100%;height:100%;touch-action:none}.button-section[_ngcontent-%COMP%]{flex:0 0 auto}"]}))}return a(),s})();const m=[{path:"",component:u}];let b=(()=>{var a;class s{static#t=a=()=>(this.\u0275fac=function(t){return new(t||s)},this.\u0275mod=n.$C({type:s}),this.\u0275inj=h.G2t({imports:[d.iI.forChild(m),d.iI]}))}return a(),s})(),x=(()=>{var a;class s{static#t=a=()=>(this.\u0275fac=function(t){return new(t||s)},this.\u0275mod=n.$C({type:s}),this.\u0275inj=h.G2t({imports:[g.MD,f.YN,p.bv,b,u]}))}return a(),s})()}}]);