(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2260],{162(w,f,a){"use strict";var v=a(9293).default,x=this;const d=a(7215),{log:m}=a(515),g=a(3668);let r=0;w.exports=()=>{const u=g("Scheduler",r),k={},B={};let q=[];r+=1;const Q=()=>Object.keys(k).length,Z=()=>{if(0!==q.length){const V=Object.keys(k);for(let A=0;A<V.length;A+=1)if(typeof B[V[A]]>"u"){q[0](k[V[A]]);break}}},_=(V,A)=>new Promise((R,E)=>{const D=d({action:V,payload:A});q.push(function(){var $=v(function*(Y){q.shift(),B[Y.id]=D;try{R(yield Y[V].apply(x,[...A,D.id]))}catch(o1){E(o1)}finally{delete B[Y.id],Z()}});return function(Y){return $.apply(this,arguments)}}()),m(`[${u}]: Add ${D.id} to JobQueue`),m(`[${u}]: JobQueue length=${q.length}`),Z()});return{addWorker:V=>(k[V.id]=V,m(`[${u}]: Add ${V.id}`),m(`[${u}]: Number of workers=${Q()}`),Z(),V.id),addJob:function(){var V=v(function*(A,...R){if(0===Q())throw Error(`[${u}]: You need to have at least one worker before adding jobs`);return _(A,R)});return function(R){return V.apply(this,arguments)}}(),terminate:function(){var V=v(function*(){Object.keys(k).forEach(function(){var A=v(function*(R){yield k[R].terminate()});return function(R){return A.apply(this,arguments)}}()),q=[]});return function(){return V.apply(this,arguments)}}(),getQueueLen:()=>q.length,getNumWorkers:Q}}},515(w,f){"use strict";let a=!1;f.logging=a,f.setLogging=v=>{a=v},f.log=(...v)=>a?console.log.apply(this,v):null},1186(w){"use strict";w.exports=(f,a)=>{f.onmessage=({data:v})=>{a(v)}}},1388(w,f,a){"use strict";var v=a(9293).default;const x=m=>new Promise((g,r)=>{const u=new FileReader;u.onload=()=>{g(u.result)},u.onerror=({target:{error:{code:k}}})=>{r(Error(`File could not be read! Code=${k}`))},u.readAsArrayBuffer(m)}),d=function(){var m=v(function*(g){let r=g;if(typeof g>"u")return"undefined";if("string"==typeof g)r=/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(g)?atob(g.split(",")[1]).split("").map(u=>u.charCodeAt(0)):yield(yield fetch(g)).arrayBuffer();else if(typeof HTMLElement<"u"&&g instanceof HTMLElement)"IMG"===g.tagName&&(r=yield d(g.src)),"VIDEO"===g.tagName&&(r=yield d(g.poster)),"CANVAS"===g.tagName&&(yield new Promise(u=>{g.toBlob(function(){var k=v(function*(B){r=yield x(B),u()});return function(B){return k.apply(this,arguments)}}())}));else if(typeof OffscreenCanvas<"u"&&g instanceof OffscreenCanvas){const u=yield g.convertToBlob();r=yield x(u)}else(g instanceof File||g instanceof Blob)&&(r=yield x(g));return new Uint8Array(r)});return function(r){return m.apply(this,arguments)}}();w.exports=d},2256(w){"use strict";w.exports=({workerPath:f,workerBlobURL:a})=>{let v;if(Blob&&URL&&a){const x=new Blob([`importScripts("${f}");`],{type:"application/javascript"});v=new Worker(URL.createObjectURL(x))}else v=new Worker(f);return v}},2260(w,f,a){"use strict";a.d(f,{WorkbookPageModule:()=>y1});var u,v=a(2200),x=a(4341),d=a(7343),m=a(8132),g=a(467),r=a(3112),q=function(i,h){var C=function(){if(typeof window>"u")return new Map;if(!u){var i=window;i.Ionicons=i.Ionicons||{},u=i.Ionicons.map=i.Ionicons.map||new Map}return u}(),t=C.get(i);void 0===t?C.set(i,h):t!==h&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(i,'". Ensure that multiple icons are not mapped to the same icon name.'))},f1=a(3459),c=a(3664),K=a(2615);const k1=["canvas"];function B1(i,h){1&i&&c.nrm(0,"ion-spinner",13)}function L1(i,h){1&i&&(c.j41(0,"span"),c.EFF(1,"CHECK!"),c.k0s())}function H1(i,h){if(1&i&&(c.j41(0,"div",20),c.EFF(1),c.k0s()),2&i){const C=h.$implicit;c.R7$(),c.JRh(C)}}function V1(i,h){if(1&i){const C=c.RV6();c.j41(0,"div",14),c.bIt("click",function(){K.eBV(C);const l=c.XpG();return K.Njj(l.dismissResults())}),c.j41(1,"div",15),c.bIt("click",function(l){return K.eBV(C),K.Njj(l.stopPropagation())}),c.j41(2,"div",16),c.EFF(3,"Interpretations"),c.k0s(),c.j41(4,"div",17),c.DNE(5,H1,2,1,"div",18),c.k0s(),c.j41(6,"ion-button",19),c.bIt("click",function(){K.eBV(C);const l=c.XpG();return K.Njj(l.dismissResults())}),c.EFF(7,"OK"),c.k0s()()()}if(2&i){const C=c.XpG();c.R7$(5),c.Y8G("ngForOf",C.results)}}let u1=(()=>{var i;class h{constructor(){this.isDrawing=!1,this.strokes=[],this.currentStroke=[],this.isChecking=!1,this.results=[],this.showResults=!1,function(i){Object.keys(i).forEach(function(h){q(h,i[h]);var C=h.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();h!==C&&q(C,i[h])})}({backspace:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M403.13 96H156.87a44.9 44.9 0 00-33.68 15.27 15.88 15.88 0 00-1.91 2.7L32 247.75a16 16 0 000 16.5l89.15 133.57a16.24 16.24 0 002 2.88 44.89 44.89 0 0033.7 15.3h246.28A44.92 44.92 0 00448 371.13V140.87A44.92 44.92 0 00403.13 96zM348 311a16 16 0 11-22.63 22.62L271.67 280 218 333.65A16 16 0 01195.35 311L249 257.33l-53.69-53.69A16 16 0 01218 181l53.69 53.7 53.67-53.7A16 16 0 01348 203.64l-53.7 53.69z'/></svg>"})}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>this.setupCanvas(),100)}ngOnDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()}setupCanvas(){const t=this.canvasRef.nativeElement,l=t.parentElement;l&&(this.resizeCanvas(),this.resizeObserver=new ResizeObserver(()=>this.resizeCanvas()),this.resizeObserver.observe(l),this.ctx=t.getContext("2d"),this.setCanvasStyle(),t.addEventListener("mousedown",this.handleMouseDown.bind(this)),t.addEventListener("mousemove",this.handleMouseMove.bind(this)),t.addEventListener("mouseup",this.handleMouseUp.bind(this)),t.addEventListener("mouseleave",this.handleMouseUp.bind(this)),t.addEventListener("touchstart",this.handleTouchStart.bind(this),{passive:!1}),t.addEventListener("touchmove",this.handleTouchMove.bind(this),{passive:!1}),t.addEventListener("touchend",this.handleTouchEnd.bind(this)))}resizeCanvas(){const t=this.canvasRef.nativeElement,l=t.parentElement;l&&(t.width=l.clientWidth,t.height=l.clientHeight,this.ctx&&this.setCanvasStyle())}setCanvasStyle(){this.ctx.strokeStyle="#fff",this.ctx.lineWidth=4,this.ctx.lineCap="round",this.ctx.lineJoin="round"}handleMouseDown(t){this.isDrawing=!0;const l=this.getMousePos(t);this.currentStroke=[l],this.ctx.beginPath(),this.ctx.moveTo(l.x,l.y)}handleMouseMove(t){if(!this.isDrawing)return;const l=this.getMousePos(t);this.currentStroke.push(l),this.ctx.lineTo(l.x,l.y),this.ctx.stroke()}handleMouseUp(){this.isDrawing&&this.currentStroke.length>0&&(this.strokes.push([...this.currentStroke]),this.currentStroke=[]),this.isDrawing=!1}handleTouchStart(t){t.preventDefault(),this.isDrawing=!0;const l=this.getTouchPos(t);this.currentStroke=[l],this.ctx.beginPath(),this.ctx.moveTo(l.x,l.y)}handleTouchMove(t){if(!this.isDrawing)return;t.preventDefault();const l=this.getTouchPos(t);this.currentStroke.push(l),this.ctx.lineTo(l.x,l.y),this.ctx.stroke()}handleTouchEnd(){this.isDrawing&&this.currentStroke.length>0&&(this.strokes.push([...this.currentStroke]),this.currentStroke=[]),this.isDrawing=!1}getMousePos(t){const l=this.canvasRef.nativeElement,L=l.getBoundingClientRect();return{x:l.width/L.width*(t.clientX-L.left),y:l.height/L.height*(t.clientY-L.top)}}getTouchPos(t){const l=this.canvasRef.nativeElement,L=l.getBoundingClientRect();return{x:l.width/L.width*(t.touches[0].clientX-L.left),y:l.height/L.height*(t.touches[0].clientY-L.top)}}onCheck(){var t=this;return(0,g.A)(function*(){if(0!==t.strokes.length){t.isChecking=!0,t.showResults=!1,t.results=[];try{const l=t.canvasRef.nativeElement,L=document.createElement("canvas");L.width=l.width,L.height=l.height;const S=L.getContext("2d");S.fillStyle="#fff",S.fillRect(0,0,L.width,L.height),S.strokeStyle="#000",S.lineWidth=6,S.lineCap="round",S.lineJoin="round";for(const U of t.strokes)if(!(U.length<2)){S.beginPath(),S.moveTo(U[0].x,U[0].y);for(let w1=1;w1<U.length;w1++)S.lineTo(U[w1].x,U[w1].y);S.stroke()}const t1=L.toDataURL("image/png"),d1=(yield f1.recognize(t1,"jpn",{logger:U=>console.log(U)})).data,m1=d1.text.trim(),S1=m1.split("").filter(U=>U.trim()),h1=new Set;m1&&h1.add(m1),S1.forEach(U=>h1.add(U)),d1.words&&d1.words.forEach(U=>{U.text.trim()&&h1.add(U.text)}),t.results=Array.from(h1).slice(0,5),0===t.results.length&&(t.results=["\u8a8d\u8b58\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"])}catch(l){console.error("OCR error:",l),t.results=["\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f"]}t.isChecking=!1,t.showResults=!0}})()}dismissResults(){this.showResults=!1}onUndo(){this.strokes.length>0&&(this.strokes.pop(),this.redrawStrokes())}redrawStrokes(){const t=this.canvasRef.nativeElement;this.ctx.clearRect(0,0,t.width,t.height),this.setCanvasStyle();for(const l of this.strokes)if(!(l.length<2)){this.ctx.beginPath(),this.ctx.moveTo(l[0].x,l[0].y);for(let L=1;L<l.length;L++)this.ctx.lineTo(l[L].x,l[L].y);this.ctx.stroke()}}clearCanvas(){const t=this.canvasRef.nativeElement;this.ctx.clearRect(0,0,t.width,t.height),this.strokes=[]}static#o=i=()=>(this.\u0275fac=function(l){return new(l||h)},this.\u0275cmp=c.VBU({type:h,selectors:[["app-workbook"]],viewQuery:function(l,L){if(1&l&&c.GBs(k1,5),2&l){let S;c.mGM(S=c.lsd())&&(L.canvasRef=S.first)}},decls:14,vars:6,consts:[["canvas",""],[1,"workbook-content",3,"fullscreen","scrollY"],[1,"prompt-bar"],["color","light"],[1,"prompt-text"],[1,"canvas-wrapper"],[1,"drawing-canvas"],["fill","clear",1,"undo-btn",3,"click"],["name","backspace"],[1,"check-btn",3,"click","disabled"],["name","crescent",4,"ngIf"],[4,"ngIf"],["class","results-overlay",3,"click",4,"ngIf"],["name","crescent"],[1,"results-overlay",3,"click"],[1,"results-card",3,"click"],[1,"results-title"],[1,"results-list"],["class","result-item",4,"ngFor","ngForOf"],["expand","block",3,"click"],[1,"result-item"]],template:function(l,L){if(1&l){const S=c.RV6();c.j41(0,"ion-content",1)(1,"div",2),c.nrm(2,"ion-menu-button",3),c.j41(3,"span",4),c.EFF(4,"A (Hiragana)"),c.k0s()(),c.j41(5,"div",5),c.nrm(6,"canvas",6,0),c.j41(8,"ion-button",7),c.bIt("click",function(){return K.eBV(S),K.Njj(L.onUndo())}),c.nrm(9,"ion-icon",8),c.k0s()(),c.j41(10,"ion-button",9),c.bIt("click",function(){return K.eBV(S),K.Njj(L.onCheck())}),c.DNE(11,B1,1,0,"ion-spinner",10)(12,L1,2,0,"span",11),c.k0s(),c.DNE(13,V1,8,1,"div",12),c.k0s()}2&l&&(c.Y8G("fullscreen",!0)("scrollY",!1),c.R7$(10),c.Y8G("disabled",L.isChecking),c.R7$(),c.Y8G("ngIf",L.isChecking),c.R7$(),c.Y8G("ngIf",!L.isChecking),c.R7$(),c.Y8G("ngIf",L.showResults))},dependencies:[r.W9,r.MC,r.Jm,r.iq,r.w2,v.MD,v.Sq,v.bT],styles:[".workbook-content[_ngcontent-%COMP%]{--background: #000}.prompt-bar[_ngcontent-%COMP%]{display:flex;align-items:center;height:48px;background:#111;padding:0 8px}.prompt-text[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:28px;color:#fff;margin-right:40px}.canvas-wrapper[_ngcontent-%COMP%]{position:absolute;inset:48px 0 0;background:#000}.drawing-canvas[_ngcontent-%COMP%]{width:100%;height:100%;touch-action:none;display:block}.undo-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;--color: #666;--padding-start: 8px;--padding-end: 8px;font-size:24px}.results-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:100}.results-card[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:16px;padding:24px;min-width:280px;max-width:90%}.results-title[_ngcontent-%COMP%]{color:#888;font-size:14px;text-transform:uppercase;letter-spacing:1px;margin-bottom:16px;text-align:center}.results-list[_ngcontent-%COMP%]{margin-bottom:20px}.result-item[_ngcontent-%COMP%]{color:#fff;font-size:32px;text-align:center;padding:12px;border-bottom:1px solid #333}.result-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.check-btn[_ngcontent-%COMP%]{position:absolute;bottom:32px;left:50%;transform:translate(-50%);--background: #222;--background-hover: #333;--color: #fff;--border-radius: 32px;--padding-start: 12vw;--padding-end: 12vw;--padding-top: 16px;--padding-bottom: 16px;min-height:60px;font-size:clamp(20px,5vw,28px);font-weight:600;letter-spacing:2px}"]}))}return i(),h})();const C1=[{path:"",component:u1}];let A1=(()=>{var i;class h{static#o=i=()=>(this.\u0275fac=function(l){return new(l||h)},this.\u0275mod=c.$C({type:h}),this.\u0275inj=K.G2t({imports:[m.iI.forChild(C1),m.iI]}))}return i(),h})(),y1=(()=>{var i;class h{static#o=i=()=>(this.\u0275fac=function(l){return new(l||h)},this.\u0275mod=c.$C({type:h}),this.\u0275inj=K.G2t({imports:[v.MD,x.YN,d.bv,A1,u1]}))}return i(),h})()},2520(w,f,a){"use strict";const v=a(6125).rE,x=a(7732);w.exports={...x,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${v}/dist/worker.min.js`}},3029(w){"use strict";w.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},3388(w){"use strict";w.exports=f=>{const a={};return typeof WorkerGlobalScope<"u"?a.type="webworker":"object"==typeof document?a.type="browser":"object"==typeof process&&(a.type="node"),typeof f>"u"?a:a[f]}},3459(w,f,a){"use strict";a(5091);const v=a(162),x=a(7853),d=a(3513),m=a(3686),g=a(7422),r=a(3029),{setLogging:u}=a(515);w.exports={languages:m,OEM:g,PSM:r,createScheduler:v,createWorker:x,setLogging:u,...d}},3513(w,f,a){"use strict";var v=a(9293).default;const x=a(7853),d=function(){var g=v(function*(r,u,k){const B=yield x(u,1,k);return B.recognize(r).finally(v(function*(){yield B.terminate()}))});return function(u,k,B){return g.apply(this,arguments)}}(),m=function(){var g=v(function*(r,u){const k=yield x("osd",0,u);return k.detect(r).finally(v(function*(){yield k.terminate()}))});return function(u,k){return g.apply(this,arguments)}}();w.exports={recognize:d,detect:m}},3668(w){"use strict";w.exports=(f,a)=>`${f}-${a}-${Math.random().toString(16).slice(3,8)}`},3686(w){"use strict";w.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},3833(w,f,a){"use strict";const v=a(2520),x=a(2256),d=a(4988),m=a(1186),g=a(9023),r=a(1388);w.exports={defaultOptions:v,spawnWorker:x,terminateWorker:d,onMessage:m,send:g,loadImage:r}},4988(w){"use strict";w.exports=f=>{f.terminate()}},5091(w){var f=function(a){"use strict";var m,v=Object.prototype,x=v.hasOwnProperty,d=Object.defineProperty||function(s,o,n){s[o]=n.value},g="function"==typeof Symbol?Symbol:{},r=g.iterator||"@@iterator",u=g.asyncIterator||"@@asyncIterator",k=g.toStringTag||"@@toStringTag";function B(s,o,n){return Object.defineProperty(s,o,{value:n,enumerable:!0,configurable:!0,writable:!0}),s[o]}try{B({},"")}catch{B=function(o,n,p){return o[n]=p}}function q(s,o,n,p){var H=Object.create((o&&o.prototype instanceof W?o:W).prototype),b=new e1(p||[]);return d(H,"_invoke",{value:l1(s,n,b)}),H}function a1(s,o,n){try{return{type:"normal",arg:s.call(o,n)}}catch(p){return{type:"throw",arg:p}}}a.wrap=q;var Q="suspendedStart",Z="suspendedYield",_="executing",G="completed",O={};function W(){}function V(){}function A(){}var R={};B(R,r,function(){return this});var E=Object.getPrototypeOf,D=E&&E(E(J([])));D&&D!==v&&x.call(D,r)&&(R=D);var $=A.prototype=W.prototype=Object.create(R);function Y(s){["next","throw","return"].forEach(function(o){B(s,o,function(n){return this._invoke(o,n)})})}function o1(s,o){function n(H,b,j,P){var T=a1(s[H],s,b);if("throw"!==T.type){var r1=T.arg,i1=r1.value;return i1&&"object"==typeof i1&&x.call(i1,"__await")?o.resolve(i1.__await).then(function(s1){n("next",s1,j,P)},function(s1){n("throw",s1,j,P)}):o.resolve(i1).then(function(s1){r1.value=s1,j(r1)},function(s1){return n("throw",s1,j,P)})}P(T.arg)}var p;d(this,"_invoke",{value:function e(H,b){function j(){return new o(function(P,T){n(H,b,P,T)})}return p=p?p.then(j,j):j()}})}function l1(s,o,n){var p=Q;return function(H,b){if(p===_)throw new Error("Generator is already running");if(p===G){if("throw"===H)throw b;return N()}for(n.method=H,n.arg=b;;){var j=n.delegate;if(j){var P=n1(j,n);if(P){if(P===O)continue;return P}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(p===Q)throw p=G,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);p=_;var T=a1(s,o,n);if("normal"===T.type){if(p=n.done?G:Z,T.arg===O)continue;return{value:T.arg,done:n.done}}"throw"===T.type&&(p=G,n.method="throw",n.arg=T.arg)}}}function n1(s,o){var n=o.method,p=s.iterator[n];if(p===m)return o.delegate=null,"throw"===n&&s.iterator.return&&(o.method="return",o.arg=m,n1(s,o),"throw"===o.method)||"return"!==n&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+n+"' method")),O;var e=a1(p,s.iterator,o.arg);if("throw"===e.type)return o.method="throw",o.arg=e.arg,o.delegate=null,O;var H=e.arg;return H?H.done?(o[s.resultName]=H.value,o.next=s.nextLoc,"return"!==o.method&&(o.method="next",o.arg=m),o.delegate=null,O):H:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,O)}function v1(s){var o={tryLoc:s[0]};1 in s&&(o.catchLoc=s[1]),2 in s&&(o.finallyLoc=s[2],o.afterLoc=s[3]),this.tryEntries.push(o)}function c1(s){var o=s.completion||{};o.type="normal",delete o.arg,s.completion=o}function e1(s){this.tryEntries=[{tryLoc:"root"}],s.forEach(v1,this),this.reset(!0)}function J(s){if(s){var o=s[r];if(o)return o.call(s);if("function"==typeof s.next)return s;if(!isNaN(s.length)){var n=-1,p=function e(){for(;++n<s.length;)if(x.call(s,n))return e.value=s[n],e.done=!1,e;return e.value=m,e.done=!0,e};return p.next=p}}return{next:N}}function N(){return{value:m,done:!0}}return V.prototype=A,d($,"constructor",{value:A,configurable:!0}),d(A,"constructor",{value:V,configurable:!0}),V.displayName=B(A,k,"GeneratorFunction"),a.isGeneratorFunction=function(s){var o="function"==typeof s&&s.constructor;return!!o&&(o===V||"GeneratorFunction"===(o.displayName||o.name))},a.mark=function(s){return Object.setPrototypeOf?Object.setPrototypeOf(s,A):(s.__proto__=A,B(s,k,"GeneratorFunction")),s.prototype=Object.create($),s},a.awrap=function(s){return{__await:s}},Y(o1.prototype),B(o1.prototype,u,function(){return this}),a.AsyncIterator=o1,a.async=function(s,o,n,p,e){void 0===e&&(e=Promise);var H=new o1(q(s,o,n,p),e);return a.isGeneratorFunction(o)?H:H.next().then(function(b){return b.done?b.value:H.next()})},Y($),B($,k,"Generator"),B($,r,function(){return this}),B($,"toString",function(){return"[object Generator]"}),a.keys=function(s){var o=Object(s),n=[];for(var p in o)n.push(p);return n.reverse(),function e(){for(;n.length;){var H=n.pop();if(H in o)return e.value=H,e.done=!1,e}return e.done=!0,e}},a.values=J,e1.prototype={constructor:e1,reset:function(s){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(c1),!s)for(var o in this)"t"===o.charAt(0)&&x.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=m)},stop:function(){this.done=!0;var o=this.tryEntries[0].completion;if("throw"===o.type)throw o.arg;return this.rval},dispatchException:function(s){if(this.done)throw s;var o=this;function n(P,T){return H.type="throw",H.arg=s,o.next=P,T&&(o.method="next",o.arg=m),!!T}for(var p=this.tryEntries.length-1;p>=0;--p){var e=this.tryEntries[p],H=e.completion;if("root"===e.tryLoc)return n("end");if(e.tryLoc<=this.prev){var b=x.call(e,"catchLoc"),j=x.call(e,"finallyLoc");if(b&&j){if(this.prev<e.catchLoc)return n(e.catchLoc,!0);if(this.prev<e.finallyLoc)return n(e.finallyLoc)}else if(b){if(this.prev<e.catchLoc)return n(e.catchLoc,!0)}else{if(!j)throw new Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return n(e.finallyLoc)}}}},abrupt:function(s,o){for(var n=this.tryEntries.length-1;n>=0;--n){var p=this.tryEntries[n];if(p.tryLoc<=this.prev&&x.call(p,"finallyLoc")&&this.prev<p.finallyLoc){var e=p;break}}e&&("break"===s||"continue"===s)&&e.tryLoc<=o&&o<=e.finallyLoc&&(e=null);var H=e?e.completion:{};return H.type=s,H.arg=o,e?(this.method="next",this.next=e.finallyLoc,O):this.complete(H)},complete:function(s,o){if("throw"===s.type)throw s.arg;return"break"===s.type||"continue"===s.type?this.next=s.arg:"return"===s.type?(this.rval=this.arg=s.arg,this.method="return",this.next="end"):"normal"===s.type&&o&&(this.next=o),O},finish:function(s){for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o];if(n.finallyLoc===s)return this.complete(n.completion,n.afterLoc),c1(n),O}},catch:function(s){for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o];if(n.tryLoc===s){var p=n.completion;if("throw"===p.type){var e=p.arg;c1(n)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(s,o,n){return this.delegate={iterator:J(s),resultName:o,nextLoc:n},"next"===this.method&&(this.arg=m),O}},a}(w.exports);try{regeneratorRuntime=f}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=f:Function("r","regeneratorRuntime = r")(f)}},6125(w){"use strict";w.exports={rE:"7.0.0"}},7215(w,f,a){"use strict";const v=a(3668);let x=0;w.exports=({id:d,action:m,payload:g={}})=>{let r=d;return typeof r>"u"&&(r=v("Job",x),x+=1),{id:r,action:m,payload:g}}},7422(w){"use strict";w.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},7732(w){"use strict";w.exports={workerBlobURL:!0,logger:()=>{}}},7853(w,f,a){"use strict";var v=a(9293).default;const x=a(8173),d=a(7215),{log:m}=a(515),g=a(3668),r=a(7422),{defaultOptions:u,spawnWorker:k,terminateWorker:B,onMessage:q,loadImage:a1,send:Q}=a(3833);let Z=0;w.exports=v(function*(_="eng",G=r.LSTM_ONLY,O={},W={}){const V=g("Worker",Z),{logger:A,errorHandler:R,...E}=x({...u,...O}),D={},$="string"==typeof _?_.split("+"):_;let Y=G,o1=W;const l1=[r.DEFAULT,r.LSTM_ONLY].includes(G)&&!E.legacyCore;let n1,v1;const c1=new Promise((M,z)=>{v1=M,n1=z});let J=k(E);J.onerror=M=>{n1(M.message)},Z+=1;const N=({id:M,action:z,payload:y})=>new Promise((I,F)=>{m(`[${V}]: Start ${M}, action=${z}`),D[`${z}-${M}`]={resolve:I,reject:F},Q(J,{workerId:V,jobId:M,action:z,payload:y})}),b=(M,z)=>N(d({id:z,action:"loadLanguage",payload:{langs:M,options:{langPath:E.langPath,dataPath:E.dataPath,cachePath:E.cachePath,cacheMethod:E.cacheMethod,gzip:E.gzip,lstmOnly:[r.DEFAULT,r.LSTM_ONLY].includes(Y)&&!E.legacyLang}}})),j=(M,z,y,I)=>N(d({id:I,action:"initialize",payload:{langs:M,oem:z,config:y}})),r1=function(){var M=v(function*(z,y={},I={text:!0},F){return N(d({id:F,action:"recognize",payload:{image:yield a1(z),options:y,output:I}}))});return function(y){return M.apply(this,arguments)}}(),i1=function(){var M=v(function*(z,y){if(l1)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return N(d({id:y,action:"detect",payload:{image:yield a1(z)}}))});return function(y,I){return M.apply(this,arguments)}}(),s1=function(){var M=v(function*(){return null!==J&&(B(J),J=null),Promise.resolve()});return function(){return M.apply(this,arguments)}}();q(J,({workerId:M,jobId:z,status:y,action:I,data:F})=>{const X=`${I}-${z}`;if("resolve"===y)m(`[${M}]: Complete ${z}`),D[X].resolve({jobId:z,data:F}),delete D[X];else if("reject"===y){if(D[X].reject(F),delete D[X],"load"===I&&n1(F),!R)throw Error(F);R(F)}else"progress"===y&&A({...F,userJobId:z})});const p1={id:V,worker:J,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(M,z,y)=>N(d({id:y,action:"FS",payload:{method:"writeFile",args:[M,z]}})),readText:(M,z)=>N(d({id:z,action:"FS",payload:{method:"readFile",args:[M,{encoding:"utf8"}]}})),removeFile:(M,z)=>N(d({id:z,action:"FS",payload:{method:"unlink",args:[M]}})),FS:(M,z,y)=>N(d({id:y,action:"FS",payload:{method:M,args:z}})),reinitialize:(M="eng",z,y,I)=>{if(l1&&[r.TESSERACT_ONLY,r.TESSERACT_LSTM_COMBINED].includes(z))throw Error("Legacy model requested but code missing.");const F=z||Y;Y=F;const X=y||o1;o1=X;const g1=("string"==typeof M?M.split("+"):M).filter(x1=>!$.includes(x1));return $.push(...g1),g1.length>0?b(g1,I).then(()=>j(M,F,X,I)):j(M,F,X,I)},setParameters:(M={},z)=>N(d({id:z,action:"setParameters",payload:{params:M}})),recognize:r1,detect:i1,terminate:s1};return N(d({id:undefined,action:"load",payload:{options:{lstmOnly:l1,corePath:E.corePath,logging:E.logging}}})).then(()=>b(_)).then(()=>j(_,G,W)).then(()=>v1(p1)).catch(()=>{}),c1})},8173(w,f,a){"use strict";const x="browser"===a(3388)("type")?d=>new URL(d,window.location.href).href:d=>d;w.exports=d=>{const m={...d};return["corePath","workerPath","langPath"].forEach(g=>{d[g]&&(m[g]=x(m[g]))}),m}},9023(w,f,a){"use strict";var v=a(9293).default;w.exports=function(){var x=v(function*(d,m){d.postMessage(m)});return function(d,m){return x.apply(this,arguments)}}()},9293(w){function f(v,x,d,m,g,r,u){try{var k=v[r](u),B=k.value}catch(q){return void d(q)}k.done?x(B):Promise.resolve(B).then(m,g)}w.exports=function a(v){return function(){var x=this,d=arguments;return new Promise(function(m,g){var r=v.apply(x,d);function u(B){f(r,m,g,u,k,"next",B)}function k(B){f(r,m,g,u,k,"throw",B)}u(void 0)})}},w.exports.__esModule=!0,w.exports.default=w.exports}}]);