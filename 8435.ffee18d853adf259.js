"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8435],{8435(C,v,i){i.d(v,{WorkbookPageModule:()=>x});var g=i(2200),p=i(4341),f=i(7343),d=i(8132),l=i(8690),n=i(3664),r=i(2615);const m=["canvas"];let u=(()=>{var a;class s{constructor(){this.isDrawing=!1}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>this.setupCanvas(),100)}ngOnDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()}setupCanvas(){const e=this.canvasRef.nativeElement,t=e.parentElement;t&&(this.resizeCanvas(),this.resizeObserver=new ResizeObserver(()=>this.resizeCanvas()),this.resizeObserver.observe(t),this.ctx=e.getContext("2d"),this.setCanvasStyle(),e.addEventListener("mousedown",this.handleMouseDown.bind(this)),e.addEventListener("mousemove",this.handleMouseMove.bind(this)),e.addEventListener("mouseup",this.handleMouseUp.bind(this)),e.addEventListener("mouseleave",this.handleMouseUp.bind(this)),e.addEventListener("touchstart",this.handleTouchStart.bind(this),{passive:!1}),e.addEventListener("touchmove",this.handleTouchMove.bind(this),{passive:!1}),e.addEventListener("touchend",this.handleTouchEnd.bind(this)))}resizeCanvas(){const e=this.canvasRef.nativeElement,t=e.parentElement;t&&(e.width=t.clientWidth,e.height=t.clientHeight,this.ctx&&this.setCanvasStyle())}setCanvasStyle(){this.ctx.strokeStyle="#fff",this.ctx.lineWidth=4,this.ctx.lineCap="round",this.ctx.lineJoin="round"}handleMouseDown(e){this.isDrawing=!0;const t=this.getMousePos(e);this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y)}handleMouseMove(e){if(!this.isDrawing)return;const t=this.getMousePos(e);this.ctx.lineTo(t.x,t.y),this.ctx.stroke()}handleMouseUp(){this.isDrawing=!1}handleTouchStart(e){e.preventDefault(),this.isDrawing=!0;const t=this.getTouchPos(e);this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y)}handleTouchMove(e){if(!this.isDrawing)return;e.preventDefault();const t=this.getTouchPos(e);this.ctx.lineTo(t.x,t.y),this.ctx.stroke()}handleTouchEnd(){this.isDrawing=!1}getMousePos(e){const t=this.canvasRef.nativeElement,o=t.getBoundingClientRect();return{x:t.width/o.width*(e.clientX-o.left),y:t.height/o.height*(e.clientY-o.top)}}getTouchPos(e){const t=this.canvasRef.nativeElement,o=t.getBoundingClientRect();return{x:t.width/o.width*(e.touches[0].clientX-o.left),y:t.height/o.height*(e.touches[0].clientY-o.top)}}onCheck(){console.log("Check button pressed")}clearCanvas(){const e=this.canvasRef.nativeElement;this.ctx.clearRect(0,0,e.width,e.height)}static#t=a=()=>(this.\u0275fac=function(t){return new(t||s)},this.\u0275cmp=n.VBU({type:s,selectors:[["app-workbook"]],viewQuery:function(t,o){if(1&t&&n.GBs(m,5),2&t){let c;n.mGM(c=n.lsd())&&(o.canvasRef=c.first)}},decls:10,vars:2,consts:[["canvas",""],[1,"workbook-content",3,"fullscreen","scrollY"],[1,"prompt-bar"],["color","light"],[1,"prompt-text"],[1,"canvas-wrapper"],[1,"drawing-canvas"],[1,"check-btn",3,"click"]],template:function(t,o){if(1&t){const c=n.RV6();n.j41(0,"ion-content",1)(1,"div",2),n.nrm(2,"ion-menu-button",3),n.j41(3,"span",4),n.EFF(4,"\u3042"),n.k0s()(),n.j41(5,"div",5),n.nrm(6,"canvas",6,0),n.k0s(),n.j41(8,"ion-button",7),n.bIt("click",function(){return r.eBV(c),r.Njj(o.onCheck())}),n.EFF(9,"CHECK!"),n.k0s()()}2&t&&n.Y8G("fullscreen",!0)("scrollY",!1)},dependencies:[l.W9,l.MC,l.Jm],styles:[".workbook-content[_ngcontent-%COMP%]{--background: #000}.prompt-bar[_ngcontent-%COMP%]{display:flex;align-items:center;height:48px;background:#111;padding:0 8px}.prompt-text[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:28px;color:#fff;margin-right:40px}.canvas-wrapper[_ngcontent-%COMP%]{position:absolute;inset:48px 0 0;background:#000}.drawing-canvas[_ngcontent-%COMP%]{width:100%;height:100%;touch-action:none;display:block}.check-btn[_ngcontent-%COMP%]{position:absolute;bottom:24px;left:50%;transform:translate(-50%);--background: #222;--background-hover: #333;--color: #fff;--border-radius: 24px;--padding-start: 32px;--padding-end: 32px;font-weight:600;letter-spacing:1px}"]}))}return a(),s})();const b=[{path:"",component:u}];let k=(()=>{var a;class s{static#t=a=()=>(this.\u0275fac=function(t){return new(t||s)},this.\u0275mod=n.$C({type:s}),this.\u0275inj=r.G2t({imports:[d.iI.forChild(b),d.iI]}))}return a(),s})(),x=(()=>{var a;class s{static#t=a=()=>(this.\u0275fac=function(t){return new(t||s)},this.\u0275mod=n.$C({type:s}),this.\u0275inj=r.G2t({imports:[g.MD,p.YN,f.bv,k,u]}))}return a(),s})()}}]);